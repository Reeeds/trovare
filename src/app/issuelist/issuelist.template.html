<div>
  <div class="container">
    <div class="alert alert-info">
      <input id="uploadButton" type="file" on-read-file="$ctrl.fileLoaded(fileContent)" accept=".csv" class="filestyle" data-classButton="btn btn-primary" data-input="false" data-classIcon="icon-plus" />
      <p>{{ $ctrl.rows.length > 0 ? ('Showing ' + issueResultList.length + ' of ' + $ctrl.rows.length) : 'No issues found' }}</p>
    </div>

    <div class="row">
      <div class="col-md-11">
        <div class="form-group">
          <div class="input-group">
            <div class="input-group-addon"><i class="fa fa-search"></i></div>
            <input type="text"
                   class="form-control"
                   placeholder="Search"
                   ng-model="$ctrl.search"
                   ng-model-options="{debounce: 500}" />
          </div>
        </div>
      </div>
      <div class="col-md-1">
        <div class="info-box">
          <i class="icon glyphicon glyphicon-info-sign"></i>
          <div class="tooltip">
            Folgende Suchm√∂glichkeiten bestehen:
            <ul>
                <li>MatchThis AndThis</li>
                <li>"Match this in one cell"</li>
                <li>--ExcludeThis</li>
                <li>--"Exclude this"</li>
                <li>MatchThis|OrThis</li>
                <li>"Match this"|"or this"</li>
                <li>ErstelltAm:01.09.2016</li>
                <li>Status:"Warten auf Drittlieferant"</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <multi-select title="Columns" item-list="$ctrl.headers" ng-hide="$ctrl.content == ''"></multi-select>
  </div>

  <table class="table table-bordered table-striped">
    <thead class="table-headers">
      <tr>
        <th class="table-header" ng-repeat="(columnKey,header) in $ctrl.headers track by $index" ng-show="header.active">
          <a ng-click="$ctrl.sortType = columnKey; $ctrl.sortReverse = !$ctrl.sortReverse; $ctrl.updateFilterName()" title="{{columnKey}}">
            {{header.title}}
            <span ng-show="$ctrl.sortType == columnKey"
                  ng-class="{ 'fa-caret-up': !$ctrl.sortReverse, 'fa-caret-down': $ctrl.sortReverse }"
                  class="fa"></span>
          </a>
          <div class="header-filter-form">
            <form ng-submit="$ctrl.appendColumnnFilterToSearch(columnKey, header.filter); header.filter=''">
              <div class="form-group">
                <div class="input-group">
                  <input type="text"
                         class="form-control"
                         placeholder="Filter this column"
                         ng-model="header.filter" />
                </div>
              </div>
            </form>
          </div>
        </th>
      </tr>
    </thead>

    <tbody class="table-rows">
      <tr ng-repeat="row in $ctrl.rows | multiSearch:$ctrl.search | orderBy:$ctrl.orderBy:$ctrl.sortReverse | limitTo: $ctrl.limitTo as issueResultList track by $index ">
        <td ng-repeat="(key,val) in row track by $index" ng-show="$ctrl.headers[key].active"
            ng-class="{ 'no-break': ($ctrl.headers[key].singleLine) }">
          <div ng-if="!$ctrl.headers[key].collapsable && !row._trovare[key]" ng-bind-html="val | highlighter: $ctrl.getSearchWords()"></div>
          <div ng-if="!$ctrl.headers[key].collapsable && row._trovare[key]">
            <a class="issue_link" ng-href="{{row._trovare[key]}}" target="_blank" ng-bind-html="val | highlighter: $ctrl.getSearchWords()"></a>
          </div>
          <div ng-if="$ctrl.headers[key].collapsable">
            <collapsable-text text="val" get-terms="$ctrl.getSearchWords()"></collapsable-text>
          </div>
        </td>
      </tr>
    </tbody>
  </table>

  <a class="load-more" ng-click="$ctrl.loadMore()" ng-show="$ctrl.rows.length > $ctrl.limitTo && issueResultList.length === $ctrl.limitTo">Load more</a>

</div>